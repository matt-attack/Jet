
extern fun int printf(char* h, int h);
extern fun char* malloc(int x);
extern fun void free(char* x);

extern fun int puts(char* str);

local int count = 0; 
struct t
{
	fun void t()
	{
		count++;
		//puts("created\n");
	}
	fun void ~t()
	{
		count--;
		//puts("killed\n");
	}
}

fun int main() 
{
	local x = new t[5];
	//test(x);
	if (0)
	{
		local t q;
		
		return 0;
		puts("hi");
	}
	if (1)
	{
		local t q;
		local t p[5];
	}
	
	free[] x;
	
	if (count != 0)
		puts("fail");
	
	return 0;
}